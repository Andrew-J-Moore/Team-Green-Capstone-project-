<div class="example-container" fxLayoutAlign="center">
  <form [formGroup]="eventForm" (ngSubmit)="onSubmit()">
    <mat-form-field class="cal-select" required>
      <mat-label>Select Calendar</mat-label>
      <mat-select formControlName="calendar" [disableOptionCentering]="true">
        <mat-option
          *ngFor="let cal of calendars"
          [value]="cal.name"
          (click)="selectCalendar(cal.id)"
          >{{ cal.name }}</mat-option
        >
      </mat-select>
      <mat-error *ngIf="eventForm.controls['calendar'].hasError('required')">Please choose a calendar</mat-error>
    </mat-form-field>
    <mat-form-field>
      <input
        matInput
        placeholder="Event Title"
        formControlName="title"
      /> 
        <mat-error *ngIf="eventForm.controls['title'].hasError('required')">Title is required</mat-error>
      </mat-form-field
    ><br />


    <mat-form-field style="width:60%">
      <textarea
        matInput
        cdkTextareaAutosize
        cdkAutosizeMinRows="2"
        cdkAutosizeMaxRows="5"
        placeholder="Event Description"
        cols="50"
        formControlName="description"
      ></textarea> </mat-form-field
    ><br />

    <mat-form-field>
      <input
        matInput
        placeholder="Event Location"
        formControlName="location"
      /> </mat-form-field
    ><br />
    <mat-form-field id="end-date">
      <input
        matInput
        placeholder="Start Date"
        formControlName="startDate"
        [matDatepicker]="startpicker"
        readonly
      />
      <mat-datepicker-toggle
        matSuffix
        [for]="startpicker"
      ></mat-datepicker-toggle>
      <mat-datepicker touchUi #startpicker></mat-datepicker>
    </mat-form-field>
    <mat-form-field *ngIf="!allDay">
      <mat-label>Start Time</mat-label>
      <input
        matInput
        formControlName="startTime"
        aria-label="default time"
        [ngxTimepicker]="starttime"
        readonly
      />
      <ngx-material-timepicker
        #starttime
        [minutesGap]="5"
        [theme]="timeTheme"
        [appendToInput]="true"
      ></ngx-material-timepicker> </mat-form-field
    ><br />
    <mat-form-field id="end-date">
      <input
        matInput
        placeholder="End Date"
        formControlName="endDate"
        [matDatepicker]="endpicker"
        readonly
      />
      <mat-datepicker-toggle
        matSuffix
        [for]="endpicker"
      ></mat-datepicker-toggle>
      <mat-datepicker touchUi #endpicker></mat-datepicker>
    </mat-form-field>
    <mat-form-field *ngIf="!allDay">
      <mat-label>End Time</mat-label>
      <input
        matInput
        formControlName="endTime"
        aria-label="default time"
        [ngxTimepicker]="endtime"
        readonly
      />
      <ngx-material-timepicker
        #endtime
        [minutesGap]="5"
        [theme]="timeTheme"
        [appendToInput]="true"
      ></ngx-material-timepicker> </mat-form-field
    ><br />
    <mat-form-field id="primary-color">
      <input
        matInput
        formControlName="primary"
        [(colorPicker)]="color"
        [style.background]="primaryColor"
        [cpFallbackColor]="'#5484ed'"
        [style.color]="'white'"
        [value]="primaryColor"
        placeholder="Event Color"
        [cpOutputFormat]="'hex'"
        (colorPickerClose)="setPrimary(color)"
        [cpPosition]="'top-right'"
        [cpPresetColors]="[
          '#5484ed',
          '#a4bdfc',
          '#46d6db',
          '#7ae7bf',
          '#51b749',
          '#fbd75b',
          '#ffb878',
          '#ff887c',
          '#dc2127',
          '#dbadff',
          '#585858'
        ]"
        [cpOKButton]="true"
        [cpColorMode]="'presets'"
        [cpPresetLabel]="'Event Color'"
        readonly
      />
    </mat-form-field>
    <mat-form-field class="example-chip-list" style="width:30%">
      <mat-chip-list #chipList aria-label="adding emails">
        <mat-chip
          *ngFor="let email of emails"
          [selectable]="selectable"
          [removable]="removable"
          (removed)="remove(email)"
        >
          <mat-icon mat-list-icon>person_outline</mat-icon>
          {{ email }}
          <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
        </mat-chip>
        <input
          placeholder="Enter Emails"
          matInput
          [formControl]="email"
          [matChipInputFor]="chipList"
          [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
          [matChipInputAddOnBlur]="addOnBlur"
          (matChipInputTokenEnd)="add($event)"
        />
      </mat-chip-list>
      <mat-error *ngIf="!isEmailValid">{{ errorMessage }}</mat-error>
      <mat-hint>Use commas or hit ENTER for multiple emails.</mat-hint>
    </mat-form-field>&nbsp;
    <mat-checkbox formControlName="allDay" (click)="allday()" color="primary"
      >All Day</mat-checkbox
    >&nbsp;&nbsp;
    <button mat-raised-button type="button" class="primary" (click)="groupSelect()" *ngIf="role !== 'ROLE_USER'">Select Groups</button>

    <mat-toolbar>
      <mat-toolbar-row>
        <button type="submit" mat-raised-button class="primary" [disabled]="!eventForm.valid">
          Confirm
        </button>
        <button
          mat-raised-button
          color="warn"
          (click)="onNoClick()"
          class="cancel-button"
        >
          Cancel
        </button>
        <span class="example-spacer"></span>
      </mat-toolbar-row>
    </mat-toolbar>
  </form>
</div>
